# language setting
language: python

# version numbers test
python:
    - 3.7

build:
    ci:
        # Required to display test results in Shippable GUI
        - mkdir -p shippable/testresults
        - mkdir -p shippable/codecoverage

        # Install Python dependencies
        - python --version
        - pip install --upgrade pip
        - pipenv install

        # Run Python tests
        - pytest ./tests --junitxml=./shippable/testresults/flask_bootstrap.xml

    on_success:
        # Run deploy script to manage deploy to appropriate environment
        - . ./devops/ci/deploy.sh

integrations:
    notifications:
        - integrationName: email
          type: email
          recipients:
              - iain.hunter@outlook.com
